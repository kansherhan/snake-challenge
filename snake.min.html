data:text/html,<canvas id="c"></canvas><script>class P{constructor(x=0,y=0){this.x=x;this.y=y;}static eq(p1,p2){return p1.x == p2.x && p1.y == p2.y;}}class B{constructor(c){this.p=new P();this.c=c;}d(){dR(this.p,this.c);}}class S extends B{constructor(){super("Black");this.s=new P();this.n=[];this.iA=1;}co(){if(P.eq(this.p,ap.p)){this.n.push(this.p);ap.rdp();}else{for(let i=0;i<this.n.length;i++){if(P.eq(this.p,this.n[i])){this.iA=0;}}}}d(){super.d();for(let i=0;i<this.n.length;i++){dR(this.n[i],this.c);}}m(){let v=this.p;for(let i=0;i<this.n.length;i++){let t=this.n[i];this.n[i]=v;v=t;}let p=this.p,s=this.s;this.p=new P(p.x+s.x,p.y+s.y);this.p.x=this.l(0,g.x-1,this.p.x);this.p.y=this.l(0,g.y-1,this.p.y);}l(i,x,v){if(i > v){return x;}else if(x<v){return i;}else{return v;}}}class A extends B{constructor(){super("Red");this.rdp();}rdp(){function rP(){return new P(rd(0,g.x-1),rd(0,g.y-1));}while(1){let p=rP();if(!P.eq(sn.p,p)){let s=1;for(let i=0;i<sn.n.length;i++){if(P.eq(sn.n[i],p)){s=0;}}if(s){this.p=p;break;}}}}}let cn=document.getElementById("c"),u=cn.getContext("2d"),sz=15,pa=3,bg="LightGray",g=new P(31,20),sn=new S(),ap=new A();sn.p=new P(Math.floor(g.x/2),Math.floor(g.y/2));cn.width=g.x*sz+(pa*g.x);cn.height=g.y*sz+(pa*g.y);function dR(p,c){u.fillStyle=c;let rs=sz+pa;u.fillRect(rs*p.x,rs*p.y,sz,sz);}function dG(){u.clearRect(0,0,cn.width,cn.height);for(let y=0;y<g.y;y++){for(let x=0;x<g.x;x++){dR(new P(x,y),bg);}}}function rd(i,x){return Math.floor(i+Math.random()*(x+1-i));}function up(){if(sn.iA){dG();sn.m();sn.co();sn.d();ap.d();}else{alert("Game over");}}window.onkeydown=(k)=>{let z=k.key,m=new P(0,0),y={x:{a:-1,d:1},y:{w:-1,s:1}};if(y.x[z]!=undefined){m.x=y.x[z];}else if(y.y[z]!=undefined){m.y=y.y[z];}else{return;}sn.s=m;up();};up();</script>